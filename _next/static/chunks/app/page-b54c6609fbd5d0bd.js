(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3920:function(t,e,i){Promise.resolve().then(i.bind(i,1245))},1245:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return p}});var s,r,n=i(7437);class o{getX(){return this.x}getY(){return this.y}equals(t){return this.x===t.x&&this.y===t.y}constructor(t,e){this.x=t,this.y=e}}(s=r||(r={})).right="right",s.left="left",s.up="up",s.down="down";class a{getPosition(){return this.position}getDirection(){return this.direction}setDirection(t){return this.direction=t,this.direction}setPosition(t){return this.position=t,this.position}move(){let t=a.nextPosition(this.position,this.direction);return this.position=t,this.getPosition()}static nextPosition(t,e){return"right"===e?new o(t.getX(),t.getY()+1):"left"===e?new o(t.getX(),t.getY()-1):"down"===e?new o(t.getX()+1,t.getY()):new o(t.getX()-1,t.getY())}static getOppositeDirection(t){return"left"===t?"right":"right"===t?"left":"up"===t?"down":"up"}constructor(t,e){this.position=t,this.direction=e}}var h=i(2265);i(6073);let d=t=>{let{cell:e}=t;return e.isFood?(0,n.jsx)("div",{className:"food-cell common-cell"}):e.isSnakeHead?(0,n.jsx)("div",{className:"snake-head common-cell"}):e.isSnakeTail?(0,n.jsx)("div",{className:"snake-tail common-cell"}):e.isSnakeBody?(0,n.jsx)("div",{className:"snake-body common-cell"}):(0,n.jsx)("div",{className:"empty-cell common-cell"})};function l(t){let{cells:e}=t;return(0,n.jsx)("table",{children:(0,n.jsx)("tbody",{children:e.map((t,e)=>(0,n.jsx)("tr",{children:t.map(t=>(0,n.jsx)("td",{children:(0,n.jsx)(d,{cell:t})},t.id))},e))})})}class c{setFood(t){this.isFood=t}setSnakeBody(t){this.isSnakeBody=t}setSnakeTail(t){this.isSnakeTail=t,this.isSnakeBody=t}setSnakeHead(t){this.isSnakeHead=t,this.isSnakeBody=t}constructor(t){this.id=t,this.isFood=!1,this.isSnakeBody=!1,this.isSnakeTail=!1,this.isSnakeHead=!1}}class u{get(t){return this.grid[t.getX()][t.getY()]}getCells(){let t=Array(this.rows);for(let e=0;e<this.rows;e++){t[e]=Array(this.cols);for(let i=0;i<this.cols;i++)t[e][i]=this.grid[e][i]}return t}add(t,e){this.grid[t.getX()][t.getY()]=e}addFood(t){let e=t.getPosition().getX(),i=t.getPosition().getY(),s=new c(e+","+i);s.setFood(!0),this.grid[e][i]=s}addSnake(t){let e=t.getPositions();for(let i=0;i<e.length;i++){let s=e[i].getX(),r=e[i].getY(),n=new c(s+","+r);n.setSnakeHead(t.isHead(e[i])),n.setSnakeTail(t.isTail(e[i])),n.setSnakeBody(!0),this.grid[s][r]=n}}clear(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.cols;e++)this.grid[t][e]=new c(t+","+e)}remove(t){this.grid[t.getX()][t.getY()]=new c(t.getX()+","+t.getY())}constructor(t,e){this.rows=0,this.cols=0,this.grid=[],this.rows=t,this.cols=e,this.grid=Array(t);for(let i=0;i<t;i++){this.grid[i]=Array(e);for(let t=0;t<e;t++)this.grid[i][t]=new c(i+","+t)}}}class g{getDirection(){return this.currDir}getPositions(){return this.area}changeDirection(t){let e=a.getOppositeDirection(t);this.currDir!==e&&this.currDir!==t&&(this.currDir=t)}move(){let t=a.nextPosition(this.area[this.size-1],this.currDir);return this.area.splice(0,1),this.area.push(t),this.area}addFirst(){let t=a.nextPosition(this.area[0],a.getOppositeDirection(this.currDir));return this.area.splice(0,0,t),this.size++,this.area}getHead(){return this.area[this.size-1]}getTail(){return this.area[0]}isSelfBite(){let t=a.nextPosition(this.area[this.size-1],this.currDir);return void 0!==this.area.find(e=>e.equals(t))}isHead(t){return t.equals(this.area[this.size-1])}isTail(t){return t.equals(this.area[0])}constructor(t,e,i){this.size=0,this.size=t,this.area=Array(t),this.area[t-1]=e;let s=a.getOppositeDirection(i);for(let e=t-2;e>=0;e--){let t=a.nextPosition(this.area[e+1],s);this.area[e]=t}this.currDir=i}}class f{move(t){return this.position=t,this.position}getPosition(){return this.position}constructor(t){this.position=t}}class m{getRandomPosition(){return new o(Math.floor(Math.random()*this.rows),Math.floor(Math.random()*this.cols))}start(){this.board.addSnake(this.snake),this.board.addFood(this.food)}setGameOver(t){this.isGameOver=t}isOutOfBounds(){let t=this.snake.getHead(),e=t.getX(),i=t.getY();return e>=this.rows||e<0||i>=this.cols||i<0}tick(){if(!this.hasGameEnded()){if(this.snake.move(),this.snake.isSelfBite()||this.isOutOfBounds()){this.setGameOver(!0);return}this.board.clear(),this.snake.getHead().equals(this.food.getPosition())&&(this.food=new f(this.getRandomPosition()),this.snake.addFirst()),this.board.addFood(this.food),this.board.addSnake(this.snake)}}hasGameEnded(){return this.isGameOver}constructor(t,e,i,s,r){this.rows=t,this.cols=e,this.isGameOver=!1,this.board=new u(t,e),this.snake=new g(i,s,r),this.movement=new a(s,r),this.food=new f(this.getRandomPosition())}}let k=t=>{let{rows:e,cols:i,snakeStartPosition:s,snakeInitSize:o,snakeInitDirection:a}=t,d=new m(e,i,o,s,a);(0,h.useEffect)(()=>{d.start(),u(d.board.getCells())},[]);let[c,u]=(0,h.useState)(d.board.getCells()),[g,f]=(0,h.useState)(!1);return(0,h.useEffect)(()=>{let t=setInterval(()=>{d.tick(),u(d.board.getCells()),d.hasGameEnded()&&f(!0)},100);return()=>clearInterval(t)},[]),(0,h.useEffect)(()=>{let t=t=>{"ArrowDown"===t.code?d.snake.changeDirection(r.down):"ArrowUp"===t.code?d.snake.changeDirection(r.up):"ArrowLeft"===t.code?d.snake.changeDirection(r.left):"ArrowRight"===t.code&&d.snake.changeDirection(r.right)};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[]),(0,n.jsxs)("div",{children:[g?(0,n.jsx)("div",{children:"Game Over!!!"}):(0,n.jsx)("div",{children:"Game Started!"}),(0,n.jsx)(l,{cells:c})]})},w=r.right;function p(){return(0,n.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-between p-24",children:(0,n.jsx)(k,{rows:30,cols:30,snakeInitSize:5,snakeInitDirection:w,snakeStartPosition:new o(0,4)})})}},6073:function(){}},function(t){t.O(0,[167,971,23,744],function(){return t(t.s=3920)}),_N_E=t.O()}]);